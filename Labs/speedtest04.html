<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		
		<script type="text/javascript" src="mootools/core.js"></script>
		<script type="text/javascript" src="mootools/more.js"></script>
			
		<script type="text/javascript" src="../Utils/mooCanvas.js"></script>
		
		<script type="text/javascript" src="../Source/Base/UI.js"></script>
		<script type="text/javascript" src="../Source/Base/Paint.js"></script>
		<script type="text/javascript" src="../Source/Base/Skin.js"></script>
		
		<script type="text/javascript" src="../Source/Element/Element.js"></script>
		<script type="text/javascript" src="../Source/Element/Label.js"></script>
	
		<script type="text/javascript" src="../Source/Form/Control.js"></script>
		<script type="text/javascript" src="../Source/Form/Button.js"></script>
		<script type="text/javascript" src="../Source/Form/Slider.js"></script>
	
		<script type="text/javascript" src="../Source/View/View.js"></script>
		
		<script type="text/javascript" src="../Source/Window/Window.js"></script>
		
		<script type="text/javascript" src="../Skins/AquaGraphite.js"></script>
		<script type="text/javascript" src="../Skins/Demo.js"></script>
		<script type="text/javascript" src="../Skins/TouchBlue.js"></script>
			
		<script type="text/javascript" src="js/examples.js"></script>
		
		<title>mooLego Speed Test</title>
		
		<script type="text/javascript">
		//<!--/*--><![CDATA[//><!--
		
			window.addEvent('domready', function(){
				
				//(?) settings
				var offone = 0;
				var offtwo = 0;
				var ratioone = 10;
				var ratiotwo = 20;
				
				//shape setting
				radius = 0;
				var offset = 0;
				var width = 102;
				var height = 102;
				var margin = 0;
				var fontSize = 11;
				
				buttons = new Array();
				
				
				
				var slidator = new UI.Window({
					title : 'Inspector',
					width : 160,
					height : 400,
					location: 'custom',
					controls : [],
					right : 50,
					top: 70,
					resizable: false,
					type : 'transparent',
					styles : {
						position : 'fixed'
						
					},
					view : { overflow : 'hidden' }
					
				});
				
				var baseParams = {
					skin : 'TouchBlue',
					range : [-10, 10],
					snap : true,
					steps : 20,
					width : 140,
					styles : {
						margin : '3px 10px',
						display : 'block'
					},
					wheel : true
				}

				new Element('br').inject(slidator);
				
				new UI.Label({
					html : 'color offset',
					styles : {
						margin: '10px 10px 0',
						color :'#fff'
					}
				}).inject(slidator);

				new UI.Slider($merge(baseParams, {
					onInjected : function(){
						this.set(offone);
					},
					onChange: function(step){
						offone = step;
					}
				})).inject(slidator);
				
				new UI.Slider($merge(baseParams, {
					onInjected : function(){
						this.set(offtwo);
					},
					onChange: function(step){
						offtwo = step;
					}
				})).inject(slidator);
				
				new UI.Label({
					html : 'color propagation',
					styles : {
						margin: '10px 10px 0',
						color :'#fff'
					}
				}).inject(slidator);
				
				new UI.Slider($merge(baseParams, {
					range : [10, 42],
					steps : 32,
					onInjected : function(){
						this.set(ratioone);
					},
					onChange: function(step){
						ratioone = step;
					}
				})).inject(slidator);
				
				new UI.Slider($merge(baseParams, {
					range : [10, 42],
					steps : 32,
					onInjected : function(){
						this.set(ratiotwo);
					},
					onChange: function(step){
						ratiotwo = step;
					}
				})).inject(slidator);
					
				new UI.Label({
					html : 'Radius',
					styles : {
						margin: '10px 10px 0',
						color :'#fff'
					}
				}).inject(slidator);
				
				new UI.Slider($merge(baseParams, {
					range : [0, 30],
					steps : 30,
					onInjected : function(){
						this.set(radius);
					},
					onChange: function(step){
						radius = step;
					}
				})).inject(slidator);
				
				new UI.Label({
					html : 'Layers offset',
					styles : {
						margin: '10px 10px 0',
						color :'#fff'
					}
				}).inject(slidator);
				
				new UI.Slider($merge(baseParams, {
					range : [0, 10],
					steps : 10,
					onInjected : function(){
						this.set(offset);
					},
					onChange: function(step){
						offset = step;
					}
				})).inject(slidator);
				
				new UI.Label({
					html : "Button's width",
					styles : {
						margin: '10px 10px 0',
						color :'#fff'
					}
				}).inject(slidator);
				
				new UI.Slider($merge(baseParams, {
					range : [50, 200],
					steps : 150,
					onInjected : function(){
						this.set(width);
					},
					onChange: function(step){
						width = step;
					}
				})).inject(slidator);
				
				new UI.Label({
					html : "Button's height",
					styles : {
						margin: '10px 10px 0',
						color :'#fff'
					}
				}).inject(slidator);
				
				new UI.Slider($merge(baseParams, {
					range : [50, 150],
					steps : 100,
					onInjected : function(){
						this.set(height);
					},
					onChange: function(step){
						height = step;
					}
				})).inject(slidator);
				
				new UI.Label({
					html : "Font Size",
					styles : {
						margin: '10px 10px 0',
						color :'#fff'
					}
				}).inject(slidator);
				
				new UI.Slider($merge(baseParams, {
					range : [4, 20],
					steps : 16,
					onInjected : function(){
						this.set(fontSize);
					},
					onChange: function(step){
						fontSize = step;
					}
				})).inject(slidator);
				
				new UI.Label({
					html : "Margin",
					styles : {
						margin: '10px 10px 0',
						color :'#fff'
					}
				}).inject(slidator);
				
				new UI.Slider($merge(baseParams, {
					range : [0, 20],
					steps : 20,
					onInjected : function(){
						this.set(margin);
					},
					onChange: function(step){
						margin = step;
					}
				})).inject(slidator);
				
				var button = new UI.Button({
					label	: 'Update',
					type : 'roundtextured',
					onClick	: function(){
						fillButtons();
					},
					styles	: {
						margin		: "20px 0 0 70px",
						fontFamily	: 'arial, helvetica, sans-serif',
						fontSize	: '13px'
					}
				}).inject(slidator);				
								
				var box = new Element('div',{
					styles			: {
						padding		: '0',

						overflow	: 'hidden'
					}
				}).inject(document.body);
				
				function fillButtons() {
					var size = 10;
					time = $time();
					var index = 0;
					for (i = 0; i < size; i++) {
						for (j = 0; j < size; j++) {
						
							var one = size - i + offone;
							var two = size - j + offtwo;
							
							var color = RGBtoHex(Math.floor(255 - ratioone * one),  0,Math.floor(255 - ratiotwo * two));
							//console.log(index)
							if (buttons[index]) {
								
								buttons[index].props.width = width;
								buttons[index].props.height = height;
								buttons[index].props.layers.front.color = '#' + color;
								
								buttons[index].props.layers.emboss.radius = radius;
								buttons[index].props.layers.front.radius = radius -2;
								buttons[index].props.layers.front.offset = offset;
								buttons[index].props.layers.reflect.radius = radius -4;
								buttons[index].props.layers.reflect.offset = offset;
								buttons[index].props.styles.margin = margin;
								buttons[index].props.components.label.styles.fontSize = fontSize;
								
								buttons[index].set('html', '<small>time</small><br/>' + (($time() - time) / 1000) + '<br/><small style="font-size:5px: color:#ccc">color</small><br/>' + color);
								
								buttons[index].setState('default');
								//console.log(index)
							}
							else {
								buttons.push(new UI.Button({
									label: '<small>time</small><br/>' + (($time() - time) / 1000) + '<br/><small style="font-size:5px: color:#ccc">color</small><br/>' + color,
									skin: 'demo',
									type: 'speedtest',
									props: {
										'default': {
											width : width,
											height : height,
											components : {
												label : {
													styles : {
														fontSize : fontSize,
														fontWeight: 'bold',
														fontFamily: 'Arial, Helvetica',
														opacity: '.7', 
														padding: '10px 16px',
														color: '#fff',
														width: '70px'
													}
												}
											},
											styles : {
												margin : margin
											},
											layers: {
												reorder: ['emboss', 'front', 'reflect'],
												emboss: {
													radius: radius,
													offset : 0,
													color: '#000',
													opacity: .17
												},
												front: {
													offset: offset,
													color: '#' + color,
													radius: radius -2,
													opacity: 1
												},
												reflect: {
													offset: [offset, offset, '40%'],
													gradient	: {
														color: ['#FFF', '#FFF'],
														opacity: [.2, .0]
													},
													radius: radius - 4
												}
											}
										}
									}
								}).inject(box))
							}
							index++;
						}
						slidator.setStatus((($time() - time) / 1000));	
					}
				};
				
				function toHex(n) {
					if (n==null) return "00";
					n=parseInt(n); if (n==0 || isNaN(n)) return "00";
					n=Math.max(0,n); n=Math.min(n,255); n=Math.round(n);
					return "0123456789ABCDEF".charAt((n-n%16)/16)
					+ "0123456789ABCDEF".charAt(n%16);
				};
				
				function RGBtoHex(R,G,B) {return toHex(R)+toHex(G)+toHex(B)}
				fillButtons();
			});
		//--><!]]>
		</script>
	</head>
	<body style="padding:0px; margin: 0 auto">
	</body>
</html>
